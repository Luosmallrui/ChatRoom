// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"chatroom/config"
	"chatroom/controller"
	"chatroom/dao"
	"chatroom/dao/cache"
	"chatroom/pkg/business"
	"chatroom/pkg/client"
	"chatroom/pkg/core"
	"chatroom/service"
	"github.com/google/wire"
)

// Injectors from wire.go:

func NewHttpInjector(conf *config.Config) *core.AppProvider {
	engine := core.NewGinServer()
	redisClient := client.NewRedisClient(conf)
	db := client.NewMySQLClient(conf)
	users := dao.NewUsers(db, redisClient)
	userService := &service.UserService{
		UsersRepo: users,
	}
	organize := dao.NewOrganize(db)
	user := &controller.User{
		Redis:        redisClient,
		UserService:  userService,
		UsersRepo:    users,
		OrganizeRepo: organize,
	}
	admin := dao.NewAdmin(db)
	jwtTokenStorage := dao.NewTokenSessionStorage(redisClient)
	captchaStorage := dao.NewCaptchaStorage(redisClient)
	captcha := dao.NewBase64Captcha(captchaStorage)
	auth := &controller.Auth{
		Config:          conf,
		AdminRepo:       admin,
		UserRepo:        users,
		JwtTokenStorage: jwtTokenStorage,
		ICaptcha:        captcha,
		UserService:     userService,
	}
	redisLock := cache.NewRedisLock(redisClient)
	messageStorage := cache.NewMessageStorage(redisClient)
	serverStorage := cache.NewSidStorage(redisClient)
	clientStorage := cache.NewClientStorage(redisClient, conf, serverStorage)
	unreadStorage := cache.NewUnreadStorage(redisClient)
	contactRemark := cache.NewContactRemark(redisClient)
	relation := cache.NewRelation(redisClient)
	contact := dao.NewContact(db, contactRemark, relation)
	group := dao.NewGroup(db)
	source := dao.NewSource(db, redisClient)
	groupMember := dao.NewGroupMember(db, relation)
	talkService := &service.TalkService{
		Source:          source,
		GroupMemberRepo: groupMember,
	}
	talkSession := dao.NewTalkSession(db)
	talkSessionService := &service.TalkSessionService{
		Source:          source,
		TalkSessionRepo: talkSession,
	}
	sequence := cache.NewSequence(redisClient)
	daoSequence := dao.NewSequence(db, sequence)
	pushMessage := &business.PushMessage{
		Redis: redisClient,
	}
	groupService := &service.GroupService{
		Source:          source,
		GroupRepo:       group,
		GroupMemberRepo: groupMember,
		Relation:        relation,
		Sequence:        daoSequence,
		PushMessage:     pushMessage,
	}
	authService := &service.AuthService{
		OrganizeRepo:    organize,
		ContactRepo:     contact,
		GroupRepo:       group,
		GroupMemberRepo: groupMember,
	}
	contactService := &service.ContactService{
		Source:      source,
		ContactRepo: contact,
	}
	clientConnectService := &service.ClientConnectService{
		Storage: clientStorage,
	}
	session := &controller.Session{
		RedisLock:            redisLock,
		MessageStorage:       messageStorage,
		ClientStorage:        clientStorage,
		UnreadStorage:        unreadStorage,
		ContactRemark:        contactRemark,
		ContactRepo:          contact,
		UsersRepo:            users,
		GroupRepo:            group,
		TalkService:          talkService,
		TalkSessionService:   talkSessionService,
		UserService:          userService,
		GroupService:         groupService,
		AuthService:          authService,
		ContactService:       contactService,
		ClientConnectService: clientConnectService,
	}
	controllerContact := &controller.Contact{
		ClientStorage:   clientStorage,
		ContactRepo:     contact,
		UsersRepo:       users,
		OrganizeRepo:    organize,
		TalkSessionRepo: talkSession,
		ContactService:  contactService,
		UserService:     userService,
		TalkListService: talkSessionService,
	}
	controllers := &controller.Controllers{
		User:    user,
		Auth:    auth,
		Session: session,
		Contact: controllerContact,
	}
	appProvider := &core.AppProvider{
		Config:      conf,
		Engine:      engine,
		Controllers: controllers,
	}
	return appProvider
}

// wire.go:

var providerSet = wire.NewSet(client.NewMySQLClient, client.NewRedisClient)
